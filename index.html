<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Realtime Persona Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- V√©rification HTTPS -->
<script>
if(location.protocol!=="https:"){
alert("Cette plateforme n√©cessite HTTPS pour activer la cam√©ra et la s√©curit√© des donn√©es.");
}
</script>

<!-- MediaPipe -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
:root{
--bg:#0d0d0d;
--panel:#1b1b2e;
--neon:#00bfff;
--accent:#6cf2c2;
}
body{margin:0;font-family:Inter,Arial;background:var(--bg);color:#fff}
header{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(circle at top,#0b2b50,#04060b)}
h1{font-size:4rem;color:var(--neon)}
section{padding:80px 5vw}
button{background:linear-gradient(135deg,var(--neon),var(--accent));border:none;padding:12px 24px;border-radius:12px;font-weight:700;cursor:pointer}
button:hover{transform:scale(1.05)}
.card{background:var(--panel);padding:20px;border-radius:18px;box-shadow:0 0 40px #00bfff22}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
.studio{display:flex;flex-wrap:wrap;gap:20px}
video,canvas{width:480px;height:360px;border-radius:20px;background:#000}
.lock{filter:blur(3px);pointer-events:none}
select{padding:10px 14px;border-radius:10px;margin-top:10px;background:var(--panel);color:#fff}
#celebs-list{max-height:300px;overflow-y:scroll;border:1px solid var(--neon);padding:10px;border-radius:10px;}
</style>
</head>

<body>

<header>
<h1>Realtime Persona Studio</h1>
<p>Remplace-toi par une IA en direct. Cam√©ra. Voix. Mouvements. C√©l√©brit√©s.</p>
<input id="email" placeholder="Email">
<button onclick="login()">Connexion</button>
<p id="status">En attente</p>
<button onclick="startCamera()">Activer la cam√©ra</button>
</header>

<section>
<h2>Studio Temps R√©el</h2>
<div class="studio">
<video id="video" autoplay muted playsinline></video>
<canvas id="avatar" width="480" height="360"></canvas>
</div>
<h3>Choisir votre c√©l√©brit√© :</h3>
<div id="celebs-list"></div>
</section>

<section>
<h2>Fonctionnalit√©s intelligentes</h2>
<div class="grid">
<div class="card">üé• D√©tection visage automatique</div>
<div class="card">üßç D√©tection posture & gestes</div>
<div class="card">üîÅ Remplacement IA instantan√©</div>
<div class="card">üó£Ô∏è Voix synchronis√©e naturelle</div>
<div class="card">ü§ñ Chatbot OFM int√©gr√©</div>
<div class="card">üìä Analytics & recommandations</div>
<div class="card">üñº Galerie images et animations</div>
</div>
</section>

<section>
<h2>Abonnements</h2>
<div class="grid">
<div class="card">Gratuit ‚Äì D√©mo + outils limit√©s</div>
<div class="card">Starter ‚Äì 10‚Ç¨</div>
<div class="card">Creator ‚Äì 20‚Ç¨</div>
<div class="card">Pro OFM ‚Äì 35‚Ç¨</div>
<div class="card">Elite ‚Äì 50‚Ç¨</div>
<div class="card">Agency ‚Äì 75‚Ç¨</div>
<div class="card">VIP ‚Äì 100‚Ç¨</div>
</div>
<button onclick="pay('paypal')">PayPal</button>
<button onclick="pay('revolut')">Revolut</button>
</section>

<section>
<h2>Chatbot IA / FAQ</h2>
<input id="q" placeholder="Pose ta question...">
<button onclick="chat()">Envoyer</button>
<p id="a"></p>
</section>

<script>
// ---------------- UTILISATEUR ----------------
const VIP_EMAILS=[
"srbastien.bonafos555@gmail.com",
"fourtierjohn04@icloud.com"
];
let user={email:"",plan:"free",paid:false};
let selectedCelebrity="";

// ---------------- LOGIN ----------------
function login(){
user.email=document.getElementById("email").value;
if(VIP_EMAILS.includes(user.email)){
user.plan="VIP";
user.paid=true;
alert("Compte VIP activ√© !");
}else{
user.plan="free";
user.paid=false;
alert("Compte gratuit activ√© !");
}
updateStatus();
}
function updateStatus(){
document.getElementById("status").textContent="Email: "+user.email+" | Plan: "+user.plan;
}

// ---------------- CAM√âRA ----------------
const video=document.getElementById("video");
const canvas=document.getElementById("avatar");
const ctx=canvas.getContext("2d");

async function startCamera(){
if(!user.paid && user.plan==="free"){
alert("Fonctionnalit√© compl√®te r√©serv√©e aux abonn√©s payants");
return;
}
try{
const stream=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:true});
video.srcObject=stream;
document.getElementById("status").textContent="Cam√©ra active ‚Äì IA en cours";
initAI();
}catch(err){
alert("Erreur cam√©ra : HTTPS + autorisation requise");
}
}

// ---------------- IA VISUELLE ----------------
function initAI(){
const face=new FaceMesh({locateFile:f=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${f}`});
face.setOptions({maxNumFaces:1,refineLandmarks:true});
face.onResults(r=>{
if(r.multiFaceLandmarks.length>0){
drawAvatar();
}
});

const pose=new Pose({locateFile:f=>`https://cdn.jsdelivr.net/npm/@mediapipe/pose/${f}`});
pose.onResults(()=>{});

const cam=new Camera(video,{onFrame:async()=>{
await face.send({image:video});
await pose.send({image:video});
},width:480,height:360});
cam.start();
}

function drawAvatar(){
ctx.clearRect(0,0,480,360);
ctx.fillStyle="#00bfff";
ctx.fillRect(160,40,160,280);
ctx.fillStyle="#fff";
ctx.font="18px Arial";
ctx.fillText("AVATAR IA ACTIF",130,30);
ctx.fillText("C√©l√©brit√©: "+selectedCelebrity,120,360);
}

// ---------------- VOIX ----------------
const rec=new (window.SpeechRecognition||webkitSpeechRecognition)();
rec.lang="fr-FR";
rec.continuous=true;
rec.onresult=e=>{
const text=e.results[e.results.length-1][0].transcript;
speak(text);
};
rec.start();
function speak(text){
const u=new SpeechSynthesisUtterance(text);
u.rate=1;u.pitch=1;
speechSynthesis.speak(u);
}

// ---------------- PAIEMENT ----------------
function pay(type){
if(type==="paypal") location.href="https://www.paypal.com/paypalme/SebastienBonafos";
if(type==="revolut") location.href="https://revolut.me/jfia7107";
}

// ---------------- CHATBOT ----------------
function chat(){
const q=document.getElementById("q").value.toLowerCase();
const a=document.getElementById("a");
if(q.includes("cam√©ra"))a.textContent="La cam√©ra s‚Äôactive uniquement en HTTPS.";
else if(q.includes("avatar"))a.textContent="L‚Äôavatar se d√©clenche d√®s d√©tection visage.";
else if(q.includes("paiement"))a.textContent="PayPal et Revolut sont disponibles.";
else a.textContent="Un agent IA vous r√©pondra bient√¥t.";
}

// ---------------- 250 C√âL√âBRIT√âS ----------------
const celebs=[];
for(let i=1;i<=250;i++){celebs.push("C√©l√©brit√© "+i);}
const celebContainer=document.getElementById("celebs-list");
celebs.forEach(c=>{
  const label=document.createElement("label");
  label.style.display="block";
  const checkbox=document.createElement("input");
  checkbox.type="radio"; // une seule s√©lection
  checkbox.name="celebrity";
  checkbox.value=c;
  checkbox.onchange=()=>{selectedCelebrity=c; drawAvatar();}
  label.appendChild(checkbox);
  label.appendChild(document.createTextNode(" "+c));
  celebContainer.appendChild(label);
});
</script>

</body>
</html>
